/* ===== FitPortal Premium Layout System ===== */
/* Dynamic Scaling & Responsive Grid Architecture */

/* ===== CONTAINER SYSTEM ===== */

.container {
  width: 100%;
  margin: 0 auto;
  padding: 0 var(--space-4);
}

.container--xs { max-width: var(--container-xs); }
.container--sm { max-width: var(--container-sm); }
.container--md { max-width: var(--container-md); }
.container--lg { max-width: var(--container-lg); }
.container--xl { max-width: var(--container-xl); }
.container--2xl { max-width: var(--container-2xl); }

.container--fluid {
  max-width: none;
  padding: 0 var(--space-6);
}

/* ===== INTELLIGENT GRID SYSTEM ===== */

.grid {
  display: grid;
  gap: var(--space-4);
}

.grid--dynamic {
  grid-template-columns: repeat(auto-fit, minmax(min(300px, 100%), 1fr));
  container-type: inline-size;
}

.grid--cols-1 { grid-template-columns: 1fr; }
.grid--cols-2 { grid-template-columns: repeat(2, 1fr); }
.grid--cols-3 { grid-template-columns: repeat(3, 1fr); }
.grid--cols-4 { grid-template-columns: repeat(4, 1fr); }
.grid--cols-5 { grid-template-columns: repeat(5, 1fr); }
.grid--cols-6 { grid-template-columns: repeat(6, 1fr); }
.grid--cols-12 { grid-template-columns: repeat(12, 1fr); }

/* Responsive grid columns */
@media (min-width: 640px) {
  .grid--sm-cols-1 { grid-template-columns: 1fr; }
  .grid--sm-cols-2 { grid-template-columns: repeat(2, 1fr); }
  .grid--sm-cols-3 { grid-template-columns: repeat(3, 1fr); }
  .grid--sm-cols-4 { grid-template-columns: repeat(4, 1fr); }
}

@media (min-width: 768px) {
  .grid--md-cols-1 { grid-template-columns: 1fr; }
  .grid--md-cols-2 { grid-template-columns: repeat(2, 1fr); }
  .grid--md-cols-3 { grid-template-columns: repeat(3, 1fr); }
  .grid--md-cols-4 { grid-template-columns: repeat(4, 1fr); }
  .grid--md-cols-6 { grid-template-columns: repeat(6, 1fr); }
}

@media (min-width: 1024px) {
  .grid--lg-cols-1 { grid-template-columns: 1fr; }
  .grid--lg-cols-2 { grid-template-columns: repeat(2, 1fr); }
  .grid--lg-cols-3 { grid-template-columns: repeat(3, 1fr); }
  .grid--lg-cols-4 { grid-template-columns: repeat(4, 1fr); }
  .grid--lg-cols-5 { grid-template-columns: repeat(5, 1fr); }
  .grid--lg-cols-6 { grid-template-columns: repeat(6, 1fr); }
}

/* Grid gaps */
.grid--gap-0 { gap: 0; }
.grid--gap-1 { gap: var(--space-1); }
.grid--gap-2 { gap: var(--space-2); }
.grid--gap-3 { gap: var(--space-3); }
.grid--gap-4 { gap: var(--space-4); }
.grid--gap-6 { gap: var(--space-6); }
.grid--gap-8 { gap: var(--space-8); }

/* ===== FLEXBOX SYSTEM ===== */

.flex {
  display: flex;
}

.flex--col {
  flex-direction: column;
}

.flex--row-reverse {
  flex-direction: row-reverse;
}

.flex--col-reverse {
  flex-direction: column-reverse;
}

.flex--wrap {
  flex-wrap: wrap;
}

.flex--nowrap {
  flex-wrap: nowrap;
}

.flex--wrap-reverse {
  flex-wrap: wrap-reverse;
}

/* Flex alignment */
.items--start { align-items: flex-start; }
.items--end { align-items: flex-end; }
.items--center { align-items: center; }
.items--baseline { align-items: baseline; }
.items--stretch { align-items: stretch; }

.justify--start { justify-content: flex-start; }
.justify--end { justify-content: flex-end; }
.justify--center { justify-content: center; }
.justify--between { justify-content: space-between; }
.justify--around { justify-content: space-around; }
.justify--evenly { justify-content: space-evenly; }

.content--start { align-content: flex-start; }
.content--end { align-content: flex-end; }
.content--center { align-content: center; }
.content--between { align-content: space-between; }
.content--around { align-content: space-around; }
.content--evenly { align-content: space-evenly; }

.self--auto { align-self: auto; }
.self--start { align-self: flex-start; }
.self--end { align-self: flex-end; }
.self--center { align-self: center; }
.self--stretch { align-self: stretch; }
.self--baseline { align-self: baseline; }

/* Flex grow/shrink */
.flex--1 { flex: 1 1 0%; }
.flex--auto { flex: 1 1 auto; }
.flex--initial { flex: 0 1 auto; }
.flex--none { flex: none; }

.grow { flex-grow: 1; }
.grow--0 { flex-grow: 0; }

.shrink { flex-shrink: 1; }
.shrink--0 { flex-shrink: 0; }

/* Flex gaps */
.gap--0 { gap: 0; }
.gap--1 { gap: var(--space-1); }
.gap--2 { gap: var(--space-2); }
.gap--3 { gap: var(--space-3); }
.gap--4 { gap: var(--space-4); }
.gap--5 { gap: var(--space-5); }
.gap--6 { gap: var(--space-6); }
.gap--8 { gap: var(--space-8); }
.gap--10 { gap: var(--space-10); }
.gap--12 { gap: var(--space-12); }

.gap-x--0 { column-gap: 0; }
.gap-x--1 { column-gap: var(--space-1); }
.gap-x--2 { column-gap: var(--space-2); }
.gap-x--3 { column-gap: var(--space-3); }
.gap-x--4 { column-gap: var(--space-4); }
.gap-x--6 { column-gap: var(--space-6); }
.gap-x--8 { column-gap: var(--space-8); }

.gap-y--0 { row-gap: 0; }
.gap-y--1 { row-gap: var(--space-1); }
.gap-y--2 { row-gap: var(--space-2); }
.gap-y--3 { row-gap: var(--space-3); }
.gap-y--4 { row-gap: var(--space-4); }
.gap-y--6 { row-gap: var(--space-6); }
.gap-y--8 { row-gap: var(--space-8); }

/* ===== APP LAYOUT ARCHITECTURE ===== */

.app-layout {
  display: grid !important;
  grid-template-areas: 
    "header header"
    "sidebar main" !important;
  grid-template-columns: 280px 1fr !important;
  grid-template-rows: auto 1fr !important;
  min-height: 100vh !important;
  background: var(--surface-background) !important;
  width: 100% !important;
  height: 100vh !important;
  overflow: hidden !important;
  position: relative !important;
}

.app-layout__header {
  grid-area: header !important;
  position: sticky !important;
  top: 0 !important;
  z-index: var(--z-sticky) !important;
  width: 100% !important;
}

.app-layout__sidebar {
  grid-area: sidebar !important;
  background: var(--surface-glass-backdrop) !important;
  backdrop-filter: var(--backdrop-blur-xl) saturate(180%) !important;
  -webkit-backdrop-filter: var(--backdrop-blur-xl) saturate(180%) !important;
  border-right: 1px solid var(--border-interactive) !important;
  transition: all var(--duration-normal) var(--ease-out) !important;
  position: relative !important;
  overflow: hidden !important;
  width: 280px !important;
}

.app-layout__main {
  grid-area: main !important;
  min-width: 0 !important;
  overflow-x: auto !important;
  overflow-y: auto !important;
  height: 100% !important;
}

/* Responsive breakpoints using media queries */
@media (max-width: 1199px) {
  .app-layout {
    grid-template-columns: 80px 1fr !important;
  }
  
  .app-layout__sidebar {
    width: 80px !important;
  }
}

@media (max-width: 767px) {
  .app-layout {
    grid-template-areas: 
      "header"
      "main" !important;
    grid-template-columns: 1fr !important;
    grid-template-rows: auto 1fr !important;
  }
  
  .app-layout__sidebar {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    bottom: 0 !important;
    width: 280px !important;
    z-index: var(--z-modal) !important;
    transform: translateX(-100%) !important;
    transition: transform var(--duration-normal) var(--ease-out) !important;
  }
  
  .app-layout__sidebar--open {
    transform: translateX(0) !important;
  }
  
  .app-layout__backdrop {
    position: fixed !important;
    inset: 0 !important;
    background: hsla(0, 0%, 0%, 0.5) !important;
    z-index: calc(var(--z-modal) - 1) !important;
    opacity: 0 !important;
    visibility: hidden !important;
    transition: all var(--duration-normal) var(--ease-out) !important;
  }
  
  .app-layout__backdrop--visible {
    opacity: 1 !important;
    visibility: visible !important;
  }
}

/* ===== SIDEBAR LAYOUT ===== */

.sidebar-layout {
  display: flex;
  flex-direction: column;
  height: 100%;
  padding: var(--space-6) var(--space-4);
  gap: var(--space-8);
}

.sidebar-layout__brand {
  padding: 0 var(--space-2);
  border-bottom: 1px solid var(--border-subtle);
  padding-bottom: var(--space-6);
  margin-bottom: var(--space-2);
}

.sidebar-layout__nav {
  flex: 1;
  overflow-y: auto;
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.sidebar-layout__nav::-webkit-scrollbar {
  display: none;
}

.sidebar-layout__footer {
  border-top: 1px solid var(--border-subtle);
  padding-top: var(--space-4);
  margin-top: auto;
}

/* Compact sidebar state */
@container (max-width: 1199px) {
  .sidebar-layout {
    align-items: center;
    padding: var(--space-4) var(--space-2);
  }
  
  .sidebar-layout__brand {
    border-bottom: none;
    padding-bottom: 0;
    margin-bottom: 0;
  }
  
  .sidebar-layout__nav {
    width: 100%;
  }
  
  .sidebar-layout__footer {
    border-top: none;
    padding-top: 0;
    margin-top: var(--space-4);
  }
}

/* ===== MAIN CONTENT LAYOUT ===== */

.main-layout {
  display: flex;
  flex-direction: column;
  min-height: 100%;
  background: var(--surface-background);
}

.main-layout__content {
  flex: 1;
  padding: clamp(var(--space-4), 2vw + var(--space-2), var(--space-8));
  max-width: var(--container-2xl);
  margin: 0 auto;
  width: 100%;
  container-type: inline-size;
}

.main-layout__header {
  margin-bottom: var(--space-8);
  padding-bottom: var(--space-6);
  border-bottom: 1px solid var(--border-subtle);
}

.main-layout__body {
  flex: 1;
}

.main-layout__footer {
  margin-top: var(--space-12);
  padding-top: var(--space-6);
  border-top: 1px solid var(--border-subtle);
}

/* ===== PAGE HEADER LAYOUT ===== */

.page-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: var(--space-6);
  margin-bottom: var(--space-8);
  flex-wrap: wrap;
}

.page-header__content {
  flex: 1;
  min-width: 0;
}

.page-header__title {
  font-size: var(--text-3xl);
  font-weight: var(--font-bold);
  color: var(--text-primary);
  margin: 0 0 var(--space-2) 0;
  line-height: var(--leading-tight);
  background: linear-gradient(
    135deg,
    var(--text-primary),
    var(--brand-600)
  );
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.page-header__subtitle {
  font-size: var(--text-base);
  color: var(--text-secondary);
  margin: 0;
  line-height: var(--leading-normal);
}

.page-header__actions {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  flex-shrink: 0;
}

@media (max-width: 640px) {
  .page-header {
    flex-direction: column;
    align-items: stretch;
    gap: var(--space-4);
  }
  
  .page-header__actions {
    justify-content: flex-start;
  }
}

/* ===== DASHBOARD GRID LAYOUT ===== */

.dashboard-grid {
  display: grid;
  gap: clamp(var(--space-4), 2vw, var(--space-8));
  container-type: inline-size;
}

.dashboard-grid--auto {
  grid-template-columns: repeat(auto-fit, minmax(min(320px, 100%), 1fr));
}

.dashboard-grid--stats {
  grid-template-columns: repeat(auto-fit, minmax(min(240px, 100%), 1fr));
  gap: var(--space-6);
}

.dashboard-grid--main {
  grid-template-areas: 
    "stats stats stats"
    "chart chart sidebar"
    "recent recent sidebar";
  grid-template-columns: 1fr 1fr 300px;
  grid-template-rows: auto 1fr auto;
  gap: var(--space-6);
}

.dashboard-grid__stats { grid-area: stats; }
.dashboard-grid__chart { grid-area: chart; }
.dashboard-grid__sidebar { grid-area: sidebar; }
.dashboard-grid__recent { grid-area: recent; }

@container (max-width: 1200px) {
  .dashboard-grid--main {
    grid-template-areas: 
      "stats stats"
      "chart sidebar"
      "recent recent";
    grid-template-columns: 1fr 280px;
  }
}

@container (max-width: 768px) {
  .dashboard-grid--main {
    grid-template-areas: 
      "stats"
      "chart"
      "sidebar"
      "recent";
    grid-template-columns: 1fr;
  }
}

/* ===== CARD GRID LAYOUT ===== */

.card-grid {
  display: grid;
  gap: var(--space-6);
  container-type: inline-size;
}

.card-grid--responsive {
  grid-template-columns: repeat(auto-fit, minmax(min(320px, 100%), 1fr));
}

.card-grid--masonry {
  columns: 320px;
  column-gap: var(--space-6);
  column-fill: balance;
}

.card-grid--masonry > * {
  break-inside: avoid;
  margin-bottom: var(--space-6);
}

@container (min-width: 640px) {
  .card-grid--2 { grid-template-columns: repeat(2, 1fr); }
}

@container (min-width: 768px) {
  .card-grid--3 { grid-template-columns: repeat(3, 1fr); }
}

@container (min-width: 1024px) {
  .card-grid--4 { grid-template-columns: repeat(4, 1fr); }
}

/* ===== UTILITY LAYOUTS ===== */

.stack {
  display: flex;
  flex-direction: column;
}

.stack--1 > * + * { margin-top: var(--space-1); }
.stack--2 > * + * { margin-top: var(--space-2); }
.stack--3 > * + * { margin-top: var(--space-3); }
.stack--4 > * + * { margin-top: var(--space-4); }
.stack--6 > * + * { margin-top: var(--space-6); }
.stack--8 > * + * { margin-top: var(--space-8); }

.cluster {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-4);
  justify-content: flex-start;
  align-items: center;
}

.center {
  box-sizing: content-box;
  margin-left: auto;
  margin-right: auto;
  max-width: var(--container-lg);
  padding-left: var(--space-4);
  padding-right: var(--space-4);
}

.cover {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

.cover > * {
  margin-top: var(--space-4);
  margin-bottom: var(--space-4);
}

.cover > :first-child:not(h1) {
  margin-top: 0;
}

.cover > :last-child:not(h1) {
  margin-bottom: 0;
}

.cover > h1 {
  margin-top: auto;
  margin-bottom: auto;
}

/* ===== ASPECT RATIOS ===== */

.aspect {
  position: relative;
  overflow: hidden;
}

.aspect::before {
  content: '';
  display: block;
  padding-bottom: var(--aspect-ratio, 100%);
}

.aspect > * {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.aspect--square { --aspect-ratio: 100%; }
.aspect--16-9 { --aspect-ratio: 56.25%; }
.aspect--4-3 { --aspect-ratio: 75%; }
.aspect--3-2 { --aspect-ratio: 66.666%; }
.aspect--golden { --aspect-ratio: 61.8%; }

/* ===== POSITION UTILITIES ===== */

.relative { position: relative; }
.absolute { position: absolute; }
.fixed { position: fixed; }
.sticky { position: sticky; }

.inset--0 { inset: 0; }
.inset-x--0 { left: 0; right: 0; }
.inset-y--0 { top: 0; bottom: 0; }

.top--0 { top: 0; }
.right--0 { right: 0; }
.bottom--0 { bottom: 0; }
.left--0 { left: 0; }

/* ===== OVERFLOW UTILITIES ===== */

.overflow--auto { overflow: auto; }
.overflow--hidden { overflow: hidden; }
.overflow--visible { overflow: visible; }
.overflow--scroll { overflow: scroll; }

.overflow-x--auto { overflow-x: auto; }
.overflow-x--hidden { overflow-x: hidden; }
.overflow-x--scroll { overflow-x: scroll; }

.overflow-y--auto { overflow-y: auto; }
.overflow-y--hidden { overflow-y: hidden; }
.overflow-y--scroll { overflow-y: scroll; }

/* ===== VISIBILITY UTILITIES ===== */

.visible { visibility: visible; }
.invisible { visibility: hidden; }

.block { display: block; }
.inline-block { display: inline-block; }
.inline { display: inline; }
.hidden { display: none; }

/* ===== RESPONSIVE UTILITIES ===== */

@media (max-width: 639px) {
  .sm\:hidden { display: none; }
  .sm\:block { display: block; }
  .sm\:flex { display: flex; }
  .sm\:grid { display: grid; }
}

@media (min-width: 640px) {
  .sm\:visible { display: block; }
  .sm\:hidden { display: none; }
}

@media (min-width: 768px) {
  .md\:visible { display: block; }
  .md\:hidden { display: none; }
}

@media (min-width: 1024px) {
  .lg\:visible { display: block; }
  .lg\:hidden { display: none; }
}

@media (min-width: 1280px) {
  .xl\:visible { display: block; }
  .xl\:hidden { display: none; }
}